<form [formGroup]="reactiveForm" (ngSubmit)="onSubmit()" class="login-form">
  <h2>Login</h2>
  <p>Welcome back! Please enter your credentials to login.</p>

  <div class="login-fields">
    <div class="control no-margin">
      <label for="email">Email</label>
      <div class="input-wrapper">
        <input 
          id="email" 
          type="email" 
          [formControl]="reactiveForm.controls.email"
          [class.invalid]="reactiveForm.controls.email.invalid && reactiveForm.get('email')?.touched"
        />
      </div>
      @if (reactiveForm.controls.email.invalid && reactiveForm.controls.email.touched) {
        <div class="control-error">
          @if (reactiveForm.controls.email.errors?.['required']) {
            <span>Email is required</span>
          }
          @if (reactiveForm.controls.email.errors?.['email']) {
            <span>Please enter a valid email address</span>
          }
        </div>
      }
    </div>

    <div class="control no-margin">
      <label for="password">Password</label>
      <div class="input-wrapper">
        <input
          id="password"
          type="password"
          formControlName="password"
          [class.invalid]="reactiveForm.get('password')?.invalid && reactiveForm.get('password')?.touched"
        />
      </div>
      @if (reactiveForm.get('password')?.invalid && reactiveForm.get('password')?.touched) {
        <div class="control-error">
          @if (reactiveForm.get('password')?.errors?.['required']) {
            <span>Password is required</span>
          }
          @if (reactiveForm.get('password')?.errors?.['minlength']) {
            <span>Password must be at least 8 characters</span>
          }
        </div>
      }
    </div>

    <div class="control no-margin">
      <label for="phone">Phone Number</label>
      <div class="input-wrapper">
        <input
          id="phone"
          type="tel"
          formControlName="phone"
          [class.invalid]="reactiveForm.get('phone')?.invalid && reactiveForm.get('phone')?.touched"
          placeholder="01XXXXXXXXX"
        />
      </div>
      @if (reactiveForm.get('phone')?.invalid && reactiveForm.get('phone')?.touched) {
        <div class="control-error">
          @if (reactiveForm.get('phone')?.errors?.['required']) {
            <span>Phone number is required</span>
          }
          @if (reactiveForm.get('phone')?.errors?.['egyptianPhone']) {
            <span>Please enter a valid Egyptian phone number</span>
          }
        </div>
      }
    </div>
  </div>
  
  @if (reactiveForm.get('email')?.touched && reactiveForm.get('email')?.dirty && reactiveForm.get('email')?.invalid 
      && reactiveForm.get('password')?.touched && reactiveForm.get('password')?.dirty 
      && reactiveForm.get('phone')?.touched && reactiveForm.get('phone')?.dirty
      && reactiveForm.invalid) {
    <div class="form-error">
      Please fix the errors above before submitting.
    </div>
  }

  <div class="form-actions">
    <button type="submit" class="button" [disabled]="reactiveForm.invalid">Login</button>
  </div>
</form>